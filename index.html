<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Speed Words Online</title>
<style>
body {margin:0;font-family:Arial;background:#111;color:#fff;text-align:center;}
#auth,#menu,#game,#leaders{display:none;padding:20px;}
input,button{padding:10px;font-size:16px;margin:5px;}
#word{font-size:32px;margin:20px;}
#timer{font-size:22px;}
</style>
</head>
<body>

<div id="auth">
<h2>üîê –í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
<input id="email" placeholder="Email"><br>
<input id="pass" type="password" placeholder="–ü–∞—Ä–æ–ª—å"><br>
<button onclick="login()">–í–æ–π—Ç–∏</button>
<button onclick="register()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
</div>

<div id="menu">
<h2>Speed Words</h2>
<button onclick="startGame()">‚ñ∂ –ò–≥—Ä–∞—Ç—å</button>
<button onclick="showLeaders()">üèÜ –õ–∏–¥–µ—Ä—ã</button>
<button onclick="logout()">üö™ –í—ã–π—Ç–∏</button>
</div>

<div id="game">
<div id="timer">60</div>
<div id="word">word</div>
<input id="input" oninput="checkWord()">
</div>

<div id="leaders">
<h2>üèÜ –õ–∏–¥–µ—Ä—ã</h2>
<div id="leaderList"></div>
<button onclick="backMenu()">‚¨Ö –ù–∞–∑–∞–¥</button>
</div>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
 apiKey: "AIzaSyBAr5YXP3JqzP_6afXsht41Td8uT9lwThE",
 authDomain: "speed-words-83e87.firebaseapp.com",
 projectId: "speed-words-83e87",
 storageBucket: "speed-words-83e87.firebasestorage.app",
 messagingSenderId: "517638541436",
 appId: "1:517638541436:web:a1bddb2ee9073ce80fb9f9"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

let score=0,time=60,curWord="";
const words=["cat","dog","apple","banana","school","window","javascript","keyboard","monitor","developer","programming","computer","internet","controller","firebase","microphone","application"];

auth.onAuthStateChanged(u=>{
 if(u){showMenu();} else {showAuth();}
});

function showAuth(){hideAll();authDiv.style.display="block";}
function showMenu(){hideAll();menu.style.display="block";}
function hideAll(){authDiv.style.display=menu.style.display=game.style.display=leaders.style.display="none";}

function login(){
 auth.signInWithEmailAndPassword(email.value,pass.value).catch(a=>alert(a.message));
}
function register(){
 auth.createUserWithEmailAndPassword(email.value,pass.value).catch(a=>alert(a.message));
}
function logout(){auth.signOut();}
function startGame(){
 hideAll();game.style.display="block";
 score=0;time=60;nextWord();
 input.value="";input.focus();
 timerInt=setInterval(()=>{
  time--;timer.innerText=time;
  if(time<=0)endGame();
 },1000);
}
function nextWord(){
 curWord=words[Math.floor(Math.random()*words.length)];
 word.innerText=curWord;
}
function checkWord(){
 if(input.value===curWord){
  score++;input.value="";nextWord();
 }
}
function endGame(){
 clearInterval(timerInt);
 db.collection("scores").add({
  email:auth.currentUser.email,
  score:score,
  time:Date.now()
 });
 alert("–¢–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: "+score);
 showMenu();
}
function showLeaders(){
 hideAll();leaders.style.display="block";
 leaderList.innerHTML="";
 db.collection("scores").orderBy("score","desc").limit(10).get().then(s=>{
  s.forEach(d=>{
   let e=d.data();
   leaderList.innerHTML+=`<div>${e.email}: ${e.score}</div>`;
  });
 });
}
function backMenu(){showMenu();}

const authDiv=document.getElementById("auth");
const menu=document.getElementById("menu");
const game=document.getElementById("game");
const leaders=document.getElementById("leaders");
const input=document.getElementById("input");
const word=document.getElementById("word");
const timer=document.getElementById("timer");
</script>

</body>
</html>
