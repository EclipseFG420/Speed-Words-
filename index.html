<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Speed Words Championship</title>
<style>
body{margin:0;background:#0b0b0b;color:white;font-family:Arial;text-align:center}
input,button{padding:10px;font-size:18px;margin:5px;border-radius:6px}
#login,#menu,#game,#leaderboard{display:none}
#word{font-size:38px;margin:20px;color:#00ff99}
.rank{color:gold}
</style>
</head>
<body>

<h1>Speed Words Championship</h1>

<div id="login">
<h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è / –í—Ö–æ–¥</h2>
<input id="user" placeholder="–õ–æ–≥–∏–Ω"><br>
<input id="pass" type="password" placeholder="–ü–∞—Ä–æ–ª—å"><br>
<button onclick="login()">–í–æ–π—Ç–∏ / –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
</div>

<div id="menu">
<h2>–ò–≥—Ä–æ–∫: <span id="uName"></span></h2>
<h3>–ó–≤–∞–Ω–∏–µ: <span id="rank" class="rank"></span></h3>
<button onclick="startGame()">‚ñ∂ –ò–≥—Ä–∞—Ç—å</button>
<button onclick="showLeaders()">üèÜ –†–µ–∫–æ—Ä–¥—ã</button>
<button onclick="logout()">üö™ –í—ã–π—Ç–∏</button>
</div>

<div id="game">
<div id="word"></div>
<input id="input">
<p>–û—á–∫–∏: <span id="score">0</span></p>
<p>–í—Ä–µ–º—è: <span id="time">60</span></p>
</div>

<div id="leaderboard">
<h2>–¢–∞–±–ª–∏—Ü–∞ —á–µ–º–ø–∏–æ–Ω–æ–≤</h2>
<ul id="leaders"></ul>
<button onclick="backMenu()">–ù–∞–∑–∞–¥</button>
</div>

<script>
let easy=["cat","dog","sun","milk","key","play","run","win","code","fast"];
let hard=["championship","keyboardmaster","javascript","performance",
"competition","international","development","difficulty","experience","programming"];
let words=[...easy,...hard];

let user=null,score=0,time=60,current="";

function getRank(s){
 if(s>=50) return "–õ–µ–≥–µ–Ω–¥–∞ ‚õ©";
 if(s>=30) return "–ú–∞—Å—Ç–µ—Ä –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã";
 if(s>=20) return "–°–∫–æ—Ä–æ—Å—Ç–Ω–æ–π";
 if(s>=10) return "–ü–µ—á–∞—Ç–Ω–∏–∫";
 return "–ù–æ–≤–∏—á–æ–∫";
}

function login(){
 let u=document.getElementById("user").value;
 let p=document.getElementById("pass").value;
 if(!u||!p) return alert("–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å!");

 let db=JSON.parse(localStorage.getItem("accounts")||"{}");

 if(db[u]){
  if(db[u].pass!==p) return alert("–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!");
 }else{
  db[u]={pass:p,record:0};
  localStorage.setItem("accounts",JSON.stringify(db));
 }

 user=u;
 localStorage.setItem("session",u);
 showMenu();
}

function showMenu(){
 document.getElementById("login").style.display="none";
 document.getElementById("menu").style.display="block";
 document.getElementById("uName").innerText=user;
 let db=JSON.parse(localStorage.getItem("accounts"));
 document.getElementById("rank").innerText=getRank(db[user].record);
}

function logout(){
 localStorage.removeItem("session");
 location.reload();
}

function newWord(){
 current=words[Math.floor(Math.random()*words.length)];
 document.getElementById("word").innerText=current;
}

function startGame(){
 score=0; time=60;
 document.getElementById("menu").style.display="none";
 document.getElementById("game").style.display="block";
 document.getElementById("input").value="";
 document.getElementById("input").focus();
 newWord();

 let timer=setInterval(()=>{
  time--;
  document.getElementById("time").innerText=time;
  if(time<=0){
   clearInterval(timer);
   saveScore();
   backMenu();
  }
 },1000);
}

document.getElementById("input").addEventListener("input",e=>{
 if(e.target.value===current){
  score++;
  document.getElementById("score").innerText=score;
  e.target.value="";
  newWord();
 }
});

function saveScore(){
 let db=JSON.parse(localStorage.getItem("accounts"));
 if(score>db[user].record) db[user].record=score;
 localStorage.setItem("accounts",JSON.stringify(db));
}

function showLeaders(){
 document.getElementById("menu").style.display="none";
 document.getElementById("leaderboard").style.display="block";
 let list=document.getElementById("leaders");
 list.innerHTML="";
 let db=JSON.parse(localStorage.getItem("accounts"));
 let sorted=Object.entries(db).sort((a,b)=>b[1].record-a[1].record);
 sorted.forEach(p=>{
  let li=document.createElement("li");
  li.innerText=`${p[0]} ‚Äî ${p[1].record} (${getRank(p[1].record)})`;
  list.appendChild(li);
 });
}

function backMenu(){
 document.getElementById("game").style.display="none";
 document.getElementById("leaderboard").style.display="none";
 showMenu();
}

let s=localStorage.getItem("session");
if(s){user=s;showMenu();}else{document.getElementById("login").style.display="block";}
</script>
</body>
</html>
