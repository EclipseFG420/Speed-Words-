<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Speed Words Online</title>
<style>
body{margin:0;font-family:Arial;background:#111;color:white;text-align:center}
input,button{padding:10px;font-size:18px;margin:5px;border-radius:6px}
#auth,#menu,#game,#leaders{display:none}
#word{font-size:36px;margin:20px;color:#00ff99}
</style>
</head>
<body>

<h1>‚ö° SPEED WORDS</h1>

<div id="auth">
  <input id="email" placeholder="Email"><br>
  <input id="password" type="password" placeholder="–ü–∞—Ä–æ–ª—å"><br>
  <button onclick="register()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
  <button onclick="login()">–í–æ–π—Ç–∏</button>
  <p id="authMsg"></p>
</div>

<div id="menu">
  <h3>–í—ã –≤–æ—à–ª–∏ –∫–∞–∫: <span id="userLabel"></span></h3>
  <button onclick="startGame()">‚ñ∂ –ò–≥—Ä–∞—Ç—å</button>
  <button onclick="loadLeaders()">üèÜ –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤</button>
  <button onclick="logout()">üö™ –í—ã–π—Ç–∏</button>
</div>

<div id="game">
  <p>‚è± –í—Ä–µ–º—è: <span id="time">60</span></p>
  <div id="word"></div>
  <input id="input" autocomplete="off">
  <p>–û—á–∫–∏: <span id="score">0</span></p>
</div>

<div id="leaders">
  <h2>üèÜ –õ–∏–¥–µ—Ä—ã</h2>
  <ul id="leadersList"></ul>
  <button onclick="backMenu()">–ù–∞–∑–∞–¥</button>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBAr5YXP3JqzP_6afXsht41Td8uT9lwThE",
  authDomain: "speed-words-83e87.firebaseapp.com",
  projectId: "speed-words-83e87",
  storageBucket: "speed-words-83e87.firebasestorage.app",
  messagingSenderId: "517638541436",
  appId: "1:517638541436:web:a1bddb2ee9073ce80fb9f9"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
</script>

<script>
let wordsEasy=["cat","dog","sun","milk","key","play","win","run","box","code"];
let wordsHard=["javascript","championship","keyboardmaster","performance","competition","international","development","difficulty","experience","programming"];
let words=[...wordsEasy,...wordsHard];

let score=0,time=60,currentWord="";
let timer=null;

function show(id){
 ["auth","menu","game","leaders"].forEach(x=>document.getElementById(x).style.display="none");
 document.getElementById(id).style.display="block";
}

function register(){
 auth.createUserWithEmailAndPassword(email.value,password.value)
 .then(()=>authMsg.innerText="–ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω!")
 .catch(e=>authMsg.innerText=e.message);
}

function login(){
 auth.signInWithEmailAndPassword(email.value,password.value)
 .catch(e=>authMsg.innerText=e.message);
}

auth.onAuthStateChanged(user=>{
 if(user){
  userLabel.innerText=user.email;
  show("menu");
 }else show("auth");
});

function logout(){auth.signOut();}

function newWord(){
 currentWord=words[Math.floor(Math.random()*words.length)];
 word.innerText=currentWord;
 input.value="";
 input.focus();
}

input.addEventListener("input",()=>{
 if(input.value===currentWord){
  score++;
  scoreEl.innerText=score;
  newWord();
 }
});

const scoreEl=document.getElementById("score");

function startGame(){
 score=0;time=60;
 scoreEl.innerText=0;
 timeEl.innerText=60;
 show("game");
 newWord();

 timer=setInterval(()=>{
  time--;
  timeEl.innerText=time;
  if(time<=0){
   clearInterval(timer);
   saveScore();
   show("menu");
  }
 },1000);
}

const timeEl=document.getElementById("time");

function saveScore(){
 db.collection("scores").add({
  user: auth.currentUser.email,
  score: score,
  date: Date.now()
 });
}

function loadLeaders(){
 leadersList.innerHTML="";
 db.collection("scores").orderBy("score","desc").limit(10).get()
 .then(snap=>{
  snap.forEach(doc=>{
   let li=document.createElement("li");
   let d=doc.data();
   li.innerText=d.user+" ‚Äî "+d.score;
   leadersList.appendChild(li);
  });
 });
 show("leaders");
}

function backMenu(){show("menu");}
</script>

</body>
</html>
